apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: homepage

resources:
  - namespace.yaml
  - deployment.yaml
  - service.yaml
  - ingress.yaml
  - serviceaccount.yaml
  - rbac.yaml
  - network-policy.yaml
  - allow-uptime-kuma.yaml
  - metrics-reader.yaml
  - egress.yaml

configMapGenerator:
  - name: homepage
    namespace: homepage
#    behavior: merge
    files:
      - config/bookmarks.yaml
      - config/settings.yaml
      - config/docker.yaml
      - config/custom.js
      - config/custom.css
      - config/proxmox.yaml
      - config/homeassistant.yaml
      - config/uptime-kuma.yaml
      - config/unifi.yaml
      - config/services.sops.yaml
      - config/widgets.sops.yaml
      - config/kubernetes.sops.yaml

generators:
  - ksops-env.yaml
  - ksops-secret.yaml